"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8005],{1793:function(t,e,s){s.d(e,{R:function(){return o},m:function(){return u}});var i=s(45139),r=s(2041),n=s(90326),u=class extends r.F{#t;#e;#s;#i;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.defaultOptions,this.#s=t.mutationCache,this.#t=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.#e,...t},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||("pending"===this.state.status?this.scheduleGc():this.#s.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){let e="pending"===this.state.status;try{if(!e){this.#r({type:"pending",variables:t}),await this.#s.config.onMutate?.(t,this);let e=await this.options.onMutate?.(t);e!==this.state.context&&this.#r({type:"pending",context:e,variables:t})}let s=await (this.#i=(0,n.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#r({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.#i.promise);return await this.#s.config.onSuccess?.(s,t,this.state.context,this),await this.options.onSuccess?.(s,t,this.state.context),await this.#s.config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,t,this.state.context),this.#r({type:"success",data:s}),s}catch(e){try{throw await this.#s.config.onError?.(e,t,this.state.context,this),await this.options.onError?.(e,t,this.state.context),await this.#s.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,e,t,this.state.context),e}finally{this.#r({type:"error",error:e})}}}#r(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!(0,n.Kw)(this.options.networkMode),status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),i.V.batch(()=>{this.#t.forEach(e=>{e.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},20568:function(t,e,s){s.r(e),s.d(e,{useMutation:function(){return l}});var i=s(2265),r=s(1793),n=s(45139),u=s(44614),o=s(46063),a=class extends u.l{#n;#u=void 0;#o;#a;constructor(t,e){super(),this.#n=t,this.setOptions(e),this.bindMethods(),this.#h()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#n.defaultMutationOptions(t),(0,o.VS)(this.options,e)||this.#n.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#o,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(e.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#o?.state.status==="pending"&&this.#o.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#o?.removeObserver(this)}onMutationUpdate(t){this.#h(),this.#c(t)}getCurrentResult(){return this.#u}reset(){this.#o?.removeObserver(this),this.#o=void 0,this.#h(),this.#c()}mutate(t,e){return this.#a=e,this.#o?.removeObserver(this),this.#o=this.#n.getMutationCache().build(this.#n,this.options),this.#o.addObserver(this),this.#o.execute(t)}#h(){let t=this.#o?.state??(0,r.R)();this.#u={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#c(t){n.V.batch(()=>{if(this.#a&&this.hasListeners()){let e=this.#u.variables,s=this.#u.context;t?.type==="success"?(this.#a.onSuccess?.(t.data,e,s),this.#a.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#a.onError?.(t.error,e,s),this.#a.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(t=>{t(this.#u)})})}},h=s(47082),c=s(20826);function l(t,e){let s=(0,h.useQueryClient)(e),[r]=i.useState(()=>new a(s,t));i.useEffect(()=>{r.setOptions(t)},[r,t]);let u=i.useSyncExternalStore(i.useCallback(t=>r.subscribe(n.V.batchCalls(t)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=i.useCallback((t,e)=>{r.mutate(t,e).catch(c.Z)},[r]);if(u.error&&(0,c.L)(r.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:o,mutateAsync:u.mutate}}},53182:function(t,e,s){s.r(e),s.d(e,{useIsMutating:function(){return o},useMutationState:function(){return h}});var i=s(2265),r=s(46063),n=s(45139),u=s(47082);function o(t,e){let s=(0,u.useQueryClient)(e);return h({filters:{...t,status:"pending"}},s).length}function a(t,e){return t.findAll(e.filters).map(t=>e.select?e.select(t):t.state)}function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,s=(0,u.useQueryClient)(e).getMutationCache(),o=i.useRef(t),h=i.useRef();return h.current||(h.current=a(s,t)),i.useEffect(()=>{o.current=t}),i.useSyncExternalStore(i.useCallback(t=>s.subscribe(()=>{let e=(0,r.Q$)(h.current,a(s,o.current));h.current!==e&&(h.current=e,n.V.schedule(t))}),[s]),()=>h.current,()=>h.current)}},66906:function(t,e,s){s.r(e),s.d(e,{useQueries:function(){return b}});var i=s(2265),r=s(45139),n=s(86968),u=s(44614),o=s(46063);function a(t,e){return t.filter(t=>!e.includes(t))}var h=class extends u.l{#n;#l;#d;#t;#p;#f;constructor(t,e,s){super(),this.#n=t,this.#d=[],this.#t=[],this.#b([]),this.setQueries(e,s)}#b(t){this.#l=t,this.#f=this.#m(t,this.#p?.combine)}onSubscribe(){1===this.listeners.size&&this.#t.forEach(t=>{t.subscribe(e=>{this.#y(t,e)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#t.forEach(t=>{t.destroy()})}setQueries(t,e,s){this.#d=t,this.#p=e,r.V.batch(()=>{let t=this.#t,e=this.#v(this.#d);e.forEach(t=>t.observer.setOptions(t.defaultedQueryOptions,s));let i=e.map(t=>t.observer),r=i.map(t=>t.getCurrentResult()),n=i.some((e,s)=>e!==t[s]);(t.length!==i.length||n)&&(this.#t=i,this.#b(r),this.hasListeners()&&(a(t,i).forEach(t=>{t.destroy()}),a(i,t).forEach(t=>{t.subscribe(e=>{this.#y(t,e)})}),this.#c()))})}getCurrentResult(){return this.#f}getQueries(){return this.#t.map(t=>t.getCurrentQuery())}getObservers(){return this.#t}getOptimisticResult(t,e){let s=this.#v(t),i=s.map(t=>t.observer.getOptimisticResult(t.defaultedQueryOptions));return[i,t=>this.#m(t??i,e),()=>s.map((t,e)=>{let r=i[e];return t.defaultedQueryOptions.notifyOnChangeProps?r:t.observer.trackResult(r,t=>{s.forEach(e=>{e.observer.trackProp(t)})})})]}#m(t,e){return e?(0,o.Q$)(this.#f,e(t)):t}#v(t){let e=this.#t,s=new Map(e.map(t=>[t.options.queryHash,t])),i=t.map(t=>this.#n.defaultQueryOptions(t)),r=i.flatMap(t=>{let e=s.get(t.queryHash);return null!=e?[{defaultedQueryOptions:t,observer:e}]:[]}),u=new Set(r.map(t=>t.defaultedQueryOptions.queryHash)),o=i.filter(t=>!u.has(t.queryHash)),a=t=>{let e=this.#n.defaultQueryOptions(t);return this.#t.find(t=>t.options.queryHash===e.queryHash)??new n.z(this.#n,e)},h=o.map(t=>({defaultedQueryOptions:t,observer:a(t)}));return r.concat(h).sort((t,e)=>i.indexOf(t.defaultedQueryOptions)-i.indexOf(e.defaultedQueryOptions))}#y(t,e){let s=this.#t.indexOf(t);-1!==s&&(this.#b(function(t,e,s){let i=t.slice(0);return i[e]=s,i}(this.#l,s,e)),this.#c())}#c(){r.V.batch(()=>{this.listeners.forEach(t=>{t(this.#l)})})}},c=s(47082),l=s(22960),d=s(39098),p=s(14951),f=s(1244);function b(t,e){let{queries:s,...u}=t,o=(0,c.useQueryClient)(e),a=(0,l.useIsRestoring)(),b=(0,d.useQueryErrorResetBoundary)(),m=i.useMemo(()=>s.map(t=>{let e=o.defaultQueryOptions(t);return e._optimisticResults=a?"isRestoring":"optimistic",e}),[s,o,a]);m.forEach(t=>{(0,f.Fb)(t),(0,p.pf)(t,b)}),(0,p.JN)(b);let[y]=i.useState(()=>new h(o,m,u)),[v,g,O]=y.getOptimisticResult(m,u.combine);i.useSyncExternalStore(i.useCallback(t=>a?()=>void 0:y.subscribe(r.V.batchCalls(t)),[y,a]),()=>y.getCurrentResult(),()=>y.getCurrentResult()),i.useEffect(()=>{y.setQueries(m,u,{listeners:!1})},[m,u,y]);let C=v.some((t,e)=>(0,f.SB)(m[e],t))?v.flatMap((t,e)=>{let s=m[e];if(s){let e=new n.z(o,s);if((0,f.SB)(s,t))return(0,f.j8)(s,e,b);(0,f.Z$)(t,a)&&(0,f.j8)(s,e,b)}return[]}):[];if(C.length>0)throw Promise.all(C);let R=v.find((t,e)=>{let s=m[e];return s&&(0,p.KJ)({result:t,errorResetBoundary:b,throwOnError:s.throwOnError,query:o.getQueryCache().get(s.queryHash)})});if(null==R?void 0:R.error)throw R.error;return g(O())}}}]);
//# sourceMappingURL=8005-86eecb60ca8561fe.js.map